"use strict";function RedBlackNode(e,t){this.key=e,this.value=t,this.color=red,this.left=null,this.right=null,this.parent=null}function RedBlackTree(){this.root=null,this.balancer=new Balancer(this)}function RedBlackNodeColor(e){return null===e?black:e.color}function find(e,t){for(;null!==e;){if(t===e.key)return e;t<e.key?e=e.left:t>e.key&&(e=e.right)}return e}function Balancer(e){this.RedBlackTree=e}var black="black",red="red";RedBlackNode.prototype.grandPa=function(){return null!=this&&null!=this.parent?this.parent.parent:null},RedBlackNode.prototype.uncle=function(){return null==this.grandPa()?null:this.parent==this.grandPa().left?this.right:this.left},RedBlackTree.prototype.found=function(e){var t=find(this.root,e);return null===t?null:t.value},RedBlackTree.prototype.add=function(e,t){var r=new RedBlackNode(e,t);if(null===this.root)this.root=r;else{for(var a=this.root;;)if(e<a.key){if(null===a.left){a.left=r;break}a=a.left}else{if(!(e>a.key))return void(a.value=t);if(null===a.right){a.right=r;break}a=a.right}r.parent=a}this.balancer.added(r)},Balancer.prototype.added=function(e){this.addCase1(e)},Balancer.prototype.replaceNode=function(e,t){null===e.parent?this.RedBlackTree.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,null!==t&&(t.parent=e.parent)},Balancer.prototype.rotateLeft=function(e){var t=e.right;this.replaceNode(e,t),e.right=t.left,null!==t.left&&(t.left.parent=e),t.left=e,e.parent=t},Balancer.prototype.rotateRight=function(e){var t=e.left;this.replaceNode(e,t),e.left=t.right,null!==t.right&&(t.right.parent=e),t.right=e,e.parent=t},Balancer.prototype.addCase1=function(e){null===e.parent?e.color=black:this.addCase2(e)},Balancer.prototype.addCase2=function(e){RedBlackNodeColor(e.parent)!==black&&this.addCase3(e)},Balancer.prototype.addCase3=function(e){var t=e.uncle(),r=e.grandPa();null!==t&&RedBlackNodeColor(t)===red?(e.parent.color=black,t.color=black,r.color=red,this.addCase1(r)):this.addCase4(e)},Balancer.prototype.addCase4=function(e){var t=e.grandPa();e===e.parent.right&&e.parent===t.left?(this.rotateLeft(e.parent),e=e.left):e===e.parent.left&&e.parent===t.right&&(this.rotateRight(e.parent),e=e.right),this.addCase5(e)},Balancer.prototype.addCase5=function(e){var t=e.grandPa();e.parent.color=black,t.color=red,e===e.parent.left&&e.parent===t.left?this.rotateRight(t):e===e.parent.right&&e.parent===t.right&&this.rotateLeft(t)};var tree=new RedBlackTree;console.log(tree.add("gee","gee")),console.log(tree.found("gee"));